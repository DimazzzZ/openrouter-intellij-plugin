<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.openrouter.intellij-plugin</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>OpenRouter</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor email="support@openrouter.ai" url="https://openrouter.ai">OpenRouter</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Simple HTML elements (text formatting, paragraphs, and lists) can be added inside this element.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
    OpenRouter plugin for IntelliJ IDEA provides integration with OpenRouter.ai API for AI model access and usage monitoring.
    
    Features:
    • View API quota and usage statistics
    • Monitor token consumption and costs
    • Quick access to OpenRouter settings
    • Status bar widget for real-time usage info
    • Support for multiple AI models
    
    Get started by configuring your OpenRouter API key in Settings > Tools > OpenRouter.
  ]]></description>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Application-level services -->
        <applicationService serviceImplementation="com.openrouter.intellij.services.OpenRouterService"/>
        <applicationService serviceImplementation="com.openrouter.intellij.services.OpenRouterSettingsService"/>
        <applicationService serviceImplementation="com.openrouter.intellij.services.OpenRouterGenerationTrackingService"/>
        
        <!-- Settings -->
        <applicationConfigurable 
            parentId="tools" 
            instance="com.openrouter.intellij.settings.OpenRouterConfigurable"
            id="com.openrouter.intellij.settings.OpenRouterConfigurable"
            displayName="OpenRouter"/>
        
        <!-- Status bar widget -->
        <statusBarWidgetFactory 
            implementation="com.openrouter.intellij.statusbar.OpenRouterStatusBarWidgetFactory"
            id="OpenRouterStatusBar"
            order="after Encoding"/>
        
        <!-- Tool window -->
        <toolWindow 
            id="OpenRouter" 
            secondary="true" 
            icon="com.openrouter.intellij.icons.OpenRouterIcons.TOOL_WINDOW"
            anchor="right"
            factoryClass="com.openrouter.intellij.toolwindow.OpenRouterToolWindowFactory"/>
    </extensions>

    <!-- Actions -->
    <actions>
        <group id="OpenRouter.ActionGroup" text="OpenRouter" description="OpenRouter actions">
            <add-to-group group-id="ToolsMenu" anchor="last"/>

            <action id="OpenRouter.ShowUsage"
                    class="com.openrouter.intellij.actions.ShowUsageAction"
                    text="Show Usage Statistics"
                    description="Display OpenRouter API usage statistics"/>

            <action id="OpenRouter.RefreshQuota"
                    class="com.openrouter.intellij.actions.RefreshQuotaAction"
                    text="Refresh Quota"
                    description="Refresh OpenRouter API quota information"/>

            <action id="OpenRouter.OpenSettings"
                    class="com.openrouter.intellij.actions.OpenSettingsAction"
                    text="Settings..."
                    description="Open OpenRouter settings"/>
        </group>
    </actions>
</idea-plugin>
