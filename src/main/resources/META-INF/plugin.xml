<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>org.zhavoronkov.openrouter</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>OpenRouter</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor email="openrouter-plugin@zhavoronkov.org" url="https://github.com/DimazzzZ/openrouter-intellij-plugin">Dmitry Zhavoronkov</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Simple HTML elements (text formatting, paragraphs, and lists) can be added inside this element.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
    <p><strong>OpenRouter IntelliJ Plugin</strong> - Comprehensive integration with <a href="https://openrouter.ai">OpenRouter.ai</a> for accessing 400+ AI models with advanced usage monitoring and quota tracking.</p>

    <h3>Key Features</h3>
    <ul>
        <li><strong>Interactive Status Bar Widget</strong> - Real-time usage display with comprehensive popup menu</li>
        <li><strong>Advanced API Key Management</strong> - Secure provisioning key support with automatic API key creation</li>
        <li><strong>Detailed Usage Analytics</strong> - Track token consumption, costs, and model performance</li>
        <li><strong>Multi-Model Support</strong> - Access to 400+ AI models through OpenRouter's unified API</li>
        <li><strong>Real-time Monitoring</strong> - Live connection status with color-coded indicators</li>
        <li><strong>Comprehensive Settings</strong> - Easy configuration with validation and testing</li>
    </ul>

    <h3>Quick Start</h3>
    <ol>
        <li>Get your Provisioning Key from <a href="https://openrouter.ai/settings/provisioning-keys">OpenRouter Provisioning Keys</a></li>
        <li>Configure in <strong>Settings â†’ Tools â†’ OpenRouter</strong></li>
        <li>Click the status bar widget to access all features</li>
    </ol>

    <h3>Perfect For</h3>
    <ul>
        <li>Developers using AI models for code assistance</li>
        <li>Teams monitoring AI usage and costs</li>
        <li>Anyone wanting easy access to multiple AI providers</li>
    </ul>

    <p><em>This is an unofficial plugin and is not affiliated with OpenRouter.ai.</em></p>
  ]]></description>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    
    <!-- AI Assistant integration dependency (optional) -->
    <depends optional="true" config-file="ai-assistant-integration.xml">com.intellij.ml.llm</depends>



    <!-- Change notes for this version -->
    <change-notes><![CDATA[
        <h3>ðŸŽ‰ Initial Release (v0.1.0)</h3>
        <p>First beta release of the OpenRouter IntelliJ Plugin with comprehensive OpenRouter.ai integration.</p>

        <h4>Key Features</h4>
        <ul>
            <li><strong>Interactive Status Bar Widget</strong> - Real-time usage display with comprehensive popup menu</li>
            <li><strong>Advanced API Key Management</strong> - Provisioning key support with automatic API key creation</li>
            <li><strong>Detailed Usage Analytics</strong> - Track token consumption, costs, and model performance</li>
            <li><strong>Smart Settings Panel</strong> - Configuration with validation and testing</li>
            <li><strong>Statistics Popup</strong> - Modal dialog with comprehensive usage analytics</li>
            <li><strong>Multi-IDE Support</strong> - Works across all JetBrains IDEs (2023.2+)</li>
        </ul>

        <h4>Technical Highlights</h4>
        <ul>
            <li>Secure credential storage using IntelliJ's built-in storage</li>
            <li>Asynchronous API operations for smooth user experience</li>
            <li>Comprehensive error handling and user feedback</li>
            <li>22 passing tests ensuring reliability</li>
        </ul>

        <p>Get started by adding your OpenRouter Provisioning Key in <strong>Settings â†’ Tools â†’ OpenRouter</strong></p>
    ]]></change-notes>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Application-level services -->
        <applicationService serviceImplementation="org.zhavoronkov.openrouter.services.OpenRouterService"/>
        <applicationService serviceImplementation="org.zhavoronkov.openrouter.services.OpenRouterSettingsService"/>
        <applicationService serviceImplementation="org.zhavoronkov.openrouter.services.OpenRouterGenerationTrackingService"/>
        <applicationService serviceImplementation="org.zhavoronkov.openrouter.services.OpenRouterProxyService"/>
        
        <!-- Settings -->
        <applicationConfigurable
            parentId="tools"
            instance="org.zhavoronkov.openrouter.settings.OpenRouterConfigurable"
            id="org.zhavoronkov.openrouter.settings.OpenRouterConfigurable"
            displayName="OpenRouter"/>

        <!-- Favorite Models sub-page -->
        <applicationConfigurable
            parentId="org.zhavoronkov.openrouter.settings.OpenRouterConfigurable"
            instance="org.zhavoronkov.openrouter.settings.FavoriteModelsConfigurable"
            id="org.zhavoronkov.openrouter.settings.FavoriteModelsConfigurable"
            displayName="Favorite Models"/>
        
        <!-- Status bar widget -->
        <statusBarWidgetFactory
            implementation="org.zhavoronkov.openrouter.statusbar.OpenRouterStatusBarWidgetFactory"
            id="OpenRouterStatusBar"
            order="after Encoding"/>

        <!-- Startup activity for proxy server -->
        <postStartupActivity implementation="org.zhavoronkov.openrouter.startup.ProxyServerStartupActivity"/>
        
        <!-- Tool window - TEMPORARILY DISABLED -->
        <!--
        <toolWindow
            id="OpenRouter"
            secondary="true"
            icon="org.zhavoronkov.openrouter.icons.OpenRouterIcons.TOOL_WINDOW"
            anchor="right"
            factoryClass="org.zhavoronkov.openrouter.toolwindow.OpenRouterToolWindowFactory"/>
        -->
    </extensions>

    <!-- Actions -->
    <actions>
        <group id="OpenRouter.ActionGroup" text="OpenRouter" description="OpenRouter actions">
            <add-to-group group-id="ToolsMenu" anchor="last"/>

            <action id="OpenRouter.ShowUsage"
                    class="org.zhavoronkov.openrouter.actions.ShowUsageAction"
                    text="Show Usage Statistics"
                    description="Display OpenRouter API usage statistics"/>

            <action id="OpenRouter.RefreshQuota"
                    class="org.zhavoronkov.openrouter.actions.RefreshQuotaAction"
                    text="Refresh Quota"
                    description="Refresh OpenRouter API quota information"/>

            <action id="OpenRouter.OpenSettings"
                    class="org.zhavoronkov.openrouter.actions.OpenSettingsAction"
                    text="Settings..."
                    description="Open OpenRouter settings"/>
        </group>
    </actions>
</idea-plugin>
